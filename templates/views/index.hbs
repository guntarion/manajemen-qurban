<div>
    <h1>Yayasan Al Muhajirin</h1>
    <p>Idul Qurban 1445 H - 2024 M</p>
</div>

<h3>Proses Sembelih</h3>
<table id="statusSapi"> 
    <thead>
        <tr>
            <th>ğŸ®1</th>
            <th>ğŸ®2</th>
            <th>ğŸ®3</th>
            <th>ğŸ®4</th>
            <th>ğŸ®5</th>
            <th>ğŸ®6</th>
            <th>ğŸ®7</th>
            <th>ğŸ®8</th>
            <th>ğŸ®9</th>
            <th>ğŸ®10</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td id="S1">âœ…</td>
            <td id="S2">âœ…</td>
            <td id="S3">âœ…</td>
            <td id="S4">âœ…</td>
            <td id="S5">âœ…</td>
            <td id="S6">â¬œï¸</td>
            <td id="S7">â¬œï¸</td>
            <td id="S8">â¬œï¸</td>
            <td id="S9">â¬œï¸</td>
            <td id="S10">â¬œï¸</td>
        </tr>
        <tr>
            <td id="S11">â¬œï¸</td>
            <td id="S12">â¬œï¸</td>
            <td id="S13">â¬œï¸</td>
            <td id="S14">â¬œï¸</td>
            <td id="S15">â¬œï¸</td>
            <td id="S16">â¬œï¸</td>
            <td id="S17">â¬œï¸</td>
            <td id="S18">â¬œï¸</td>
            <td id="S19">â¬œï¸</td>
            <td id="S20">â¬œï¸</td>
        </tr>
    </tbody>
</table>



<table id="statusKambing">
    <thead>
        <tr>
            <th>ğŸ1</th>
            <th>ğŸ2</th>
            <th>ğŸ3</th>
            <th>ğŸ4</th>
            <th>ğŸ5</th>
            <th>ğŸ6</th>
            <th>ğŸ7</th>
            <th>ğŸ8</th>
            <th>ğŸ9</th>
            <th>ğŸ10</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td id="S1">âœ…</td>
            <td id="S2">âœ…</td>
            <td id="S3">âœ…</td>
            <td id="S4">âœ…</td>
            <td id="S5">âœ…</td>
            <td id="S6">âœ…</td>
            <td id="S7">âœ…</td>
            <td id="S8">âœ…</td>
            <td id="S9">â¬œï¸</td>
            <td id="S10">â¬œï¸</td>
        </tr>
        <tr>
            <td id="S11">â¬œï¸</td>
            <td id="S12">â¬œï¸</td>
            <td id="S13">â¬œï¸</td>
            <td id="S14">â¬œï¸</td>
            <td id="S15">â¬œï¸</td>
            <td id="S16">â¬œï¸</td>
            <td id="S17">â¬œï¸</td>
            <td id="S18">â¬œï¸</td>
            <td id="S19">â¬œï¸</td>
            <td id="S10">â¬œï¸</td>
        </tr>
    </tbody>
</table>



<h3>Komulatif Timbang</h3>
<table id="numberTimbangFromDatabase">
    <tr>
        <th style="width: 100px; font-size: 25px; text-align: center;">ğŸ® 3</th>
        <th style="width: 100px; font-size: 25px; text-align: center;">ğŸ® 1</th>
        <th style="width: 100px; font-size: 25px; text-align: center;">ğŸ® Â½</th>
        <th style="width: 100px; font-size: 25px; text-align: center;">ğŸ Â½</th>
        <th style="width: 100px; font-size: 25px; text-align: center;">ğŸ£ Â½</th>
        <th style="width: 100px; font-size: 25px; text-align: center;">ğŸªº</th>
    </tr>
    <tr>
        <td id="sapi3kg-database" style="font-size: 40px; text-align: center;">{{timbang.Sapi_three_kg.hasil}}</td>
        <td id="sapi1kg-database" style="font-size: 40px; text-align: center;">{{timbang.Sapi_one_kg.hasil}}</td>
        <td id="sapiHalfKg-database" style="font-size: 40px; text-align: center;">{{timbang.Sapi_half_kg.hasil}}</td>
        <td id="kambingHalfKg-database" style="font-size: 40px; text-align: center;">{{timbang.Kambing_half_kg.hasil}}</td>
        <td id="campurHalfKg-database" style="font-size: 40px; text-align: center;">{{timbang.Campur_half_kg.hasil}}</td>
        <td id="jeroan-database" style="font-size: 40px; text-align: center;">{{timbang.Jeroan.hasil}}</td>
    </tr>
</table>



<h3>Komulatif Inventory</h3>
<table id="numberInventoryFromDatabase">
    <tr>
        <th style="width: 400px; font-size: 25px; text-align: center;">Jenis</th>
        <th style="width: 140px; font-size: 25px; text-align: center;">Kuanti</th>
        <th style="width: 140px; font-size: 25px; text-align: center;">Target</th>
        <th style="width: 140px; font-size: 25px; text-align: center;">Prosen</th>
        <th style="width: 140px; font-size: 25px; text-align: center;">Kurang</th>
    </tr>
    <tr>
        <td style="font-size: 23px; text-align: center; padding: 20px">ğŸ®ğŸ™‚ 3 kg (Pengqurban)</td>
        <td id="sapipengqurban3kg-value" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapipengqurban3kg.hasil}}</td>
        <td id="sapipengqurban3kg-target" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapipengqurban3kg.target_value}}</td>
        <td id="sapipengqurban3kg-percent" style="font-size: 27px; text-align: center; padding: 20px">0%</td>
        <td id="sapipengqurban3kg-remaining" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapipengqurban3kg.target_value}}</td>
    </tr>
    <tr>
        <td style="font-size: 23px; text-align: center; padding: 20px">ğŸ®ğŸ 2 kg (Panitia)</td>
        <td id="sapikambing2kg-value" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapikambing2kg.hasil}}</td>
        <td id="sapikambing2kg-target" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapikambing2kg.target_value}}</td>
        <td id="sapikambing2kg-percent" style="font-size: 27px; text-align: center; padding: 20px">0%</td>
        <td id="sapikambing2kg-remaining" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapikambing2kg.target_value}}</td>
    </tr>
    <tr>
        <td style="font-size: 23px; text-align: center; padding: 20px">ğŸ®ğŸ£ 1 kg (Umum #1)</td>
        <td id="sapicampur1kg-value" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapicampur1kg.hasil}}</td>
        <td id="sapicampur1kg-target" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapicampur1kg.target_value}}</td>
        <td id="sapicampur1kg-percent" style="font-size: 27px; text-align: center; padding: 20px">0%</td>
        <td id="sapicampur1kg-remaining" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.sapicampur1kg.target_value}}</td>
    </tr>
    <tr>
        <td style="font-size: 23px; text-align: center; padding: 20px">ğŸğŸ£ 1 kg (Umum #2)</td>
        <td id="kambingcampur1kg-value" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.kambingcampur1kg.hasil}}</td>
        <td id="kambingcampur1kg-target" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.kambingcampur1kg.target_value}}</td>
        <td id="kambingcampur1kg-percent" style="font-size: 27px; text-align: center; padding: 20px">0%</td>
        <td id="kambingcampur1kg-remaining" style="font-size: 27px; text-align: center; padding: 20px">
            {{inventory.kambingcampur1kg.target_value}}</td>
    </tr>
</table>


<h3>Distribusi</h3>

<table>
    <tr>
        <th style="width: 200px; font-size: 21px; text-align: center;">Kategori</th>
        <th style="width: 100px; font-size: 21px; text-align: center;">Target</th>
        <th style="width: 100px; font-size: 21px; text-align: center;">Terealisasi</th>
        <th style="width: 100px; font-size: 21px; text-align: center;">Progress</th>
    </tr>
    <tr>
        <td style="font-size: 21px; text-align: center; padding: 20px">Pengqurban Sapi</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0%</td>
    </tr>
    <tr>
        <td style="font-size: 21px; text-align: center; padding: 20px">Pengqurban Kambing</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0%</td>
    </tr>
    <tr>
        <td style="font-size: 21px; text-align: center; padding: 20px">Panitia</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0%</td>
    </tr>
    <tr>
        <td style="font-size: 21px; text-align: center; padding: 20px">RT RW</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0%</td>
    </tr>
    <tr>
        <td style="font-size: 21px; text-align: center; padding: 20px">Lembaga</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0</td>
        <td style="font-size: 21px; text-align: center; padding: 20px">0%</td>
    </tr>
</table>




<style>

    #statusSapi th, #statusSapi td, #statusKambing th, #statusKambing td {
        width: 90px;
        font-size: 25px;
        text-align: center;
    }

    table {
        border-collapse: collapse;
    }

    td,
    th {
        border-right: 1px solid #000;
        border-left: 1px solid #000;
    }

    th:first-child,
    td:first-child {
        border-left: none;
    }

    th:last-child,
    td:last-child {
        border-right: none;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const serverAddress = "{{wsUrl}}";
        const socket = new WebSocket(serverAddress);

        socket.addEventListener('open', (event) => {
            console.log('Index Page is Connected to WebSocket server');
        });

        socket.addEventListener('message', (event) => {
            const data = JSON.parse(event.data);
            console.log('WebSocket message received:', data);

            if (data.type === 'update-inventory') {
                updateInventory('sapipengqurban3kg', data.inventory.sapipengqurban3kg.hasil, data.inventory.sapipengqurban3kg.target_value);
                updateInventory('sapikambing2kg', data.inventory.sapikambing2kg.hasil, data.inventory.sapikambing2kg.target_value);
                updateInventory('sapicampur1kg', data.inventory.sapicampur1kg.hasil, data.inventory.sapicampur1kg.target_value);
                updateInventory('kambingcampur1kg', data.inventory.kambingcampur1kg.hasil, data.inventory.kambingcampur1kg.target_value);
            } else if (data.type === 'update-timbang') {
                document.getElementById('sapi3kg-database').textContent = data.timbang.Sapi_three_kg.hasil;
                document.getElementById('sapi1kg-database').textContent = data.timbang.Sapi_one_kg.hasil;
                document.getElementById('sapiHalfKg-database').textContent = data.timbang.Sapi_half_kg.hasil;
                document.getElementById('kambingHalfKg-database').textContent = data.timbang.Kambing_half_kg.hasil;
                document.getElementById('campurHalfKg-database').textContent = data.timbang.Campur_half_kg.hasil;
                document.getElementById('jeroan-database').textContent = data.timbang.Jeroan.hasil;
            }
        });

        socket.addEventListener('close', (event) => {
            console.log('Index Page is Disconnected from WebSocket server');
        });

        function updateInventory(id, value, target) {
            const valueElement = document.getElementById(`${id}-value`);
            const percentElement = document.getElementById(`${id}-percent`);
            const remainingElement = document.getElementById(`${id}-remaining`);
            const targetElement = document.getElementById(`${id}-target`);

            valueElement.textContent = value;
            targetElement.textContent = target;
            const percentage = ((value / target) * 100).toFixed(2);
            percentElement.textContent = `${percentage}%`;
            remainingElement.textContent = target - value;
        }
    });
</script>